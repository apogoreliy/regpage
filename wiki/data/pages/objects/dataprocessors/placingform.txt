====== Работа с формой размещения ======

Форма размещения предназначена для размещения участников по объектам размещения((Гостиницы, общежития, дома святых и др.)) и комнатам. Она состоит из трёх областей:

  * список участников для размещения (слева);
  * информационное поле (под списком участников);
  * дерево размещения (с объектами размещения и комнатами).

^{{:about:attention.png |}}Перед началом размещения участников рекомендуется выполнить подготовительные действия:^

  * удалить из дерева размещения комнаты, которые не будут использоваться для текущего мероприятия;
  * указать категории комнат(("Для братьев", "Для сестёр" или "Без категории".)); категории можно указывать целым этажам.

{{ :about:forma_razm0.jpg | Форма размещения}}

^ Основной способ размещения состоит в перетаскивании участников из списка участников (слева) в дерево размещения (справа) с помощью мыши. Возможно одновременное перетаскивание нескольких участников выбранных мышью при нажатой кнопке Ctrl. ^

При перетаскивании нет необходимости предварительно раскрывать комнату. Просто выделите одного или нескольких участников в списке для размещения (слева) и перетащите их мышью на строку комнаты в дереве размещения (справа). Если в комнате недостаточно мест или категория комнаты не соответствует участнику, система предупредит об этом и отменит перетаскивание.

----
===== 1. Список участников для размещения =====

{{ :about:forma_razm01.jpg|}}

Список участников для размещения включает тех участников, зарегистрированных на текущее мероприятие, у которых в бланке регистрации установлен флажок "Необходимо размещение".

Со списком участников можно выполнить несколько действий: найти определённого участника в списке, настроить список с отбором или группировкой по определённым критериям, а также вывести список на печать.

Ниже перечислены кнопки панели инструментов списка в порядке, изображённом на скриншоте:

  * кнопка печати списка;
  * кнопка поиска участника;
  * кнопка отмены отбора;
  * кнопка настройки списка.

==== Поиск участника ====

Поиск участника можно осуществить //двумя способами//.

**Первый способ**: нажмите кнопку поиска участника (откроется окно поиска) и начните набирать фамилию участника; выбрав участника из предложенного списка нажмите Enter или кнопку "Найти".

**Второй способ** (более оперативный): сразу начните набирать фамилию участника - автоматически появится окно поиска - и далее выполните действия, описанные в первом способе. Для этого способа курсор должен находиться в колонке "Участник".

В результате поиска в списке участников останется одна строка с найденным участником. Для того, чтобы отменить отбор и отобразить весь список, необходимо нажать кнопку отмены отбора.

==== Настройка списка ====

Для настройки списка используется кнопка "Настроить". При её нажатии откроется окно настройки списка, которое позволяет произвести разнообразные настройки: отобрать определённых участников (например, братьев или сестёр, студентов и т.д.), сгруппировать список (по городам, категориям, статусам и возрастам).

Окно настройки списка является универсальным инструментом, который используется в большинстве списков. Окно настройки описывается [[main:listset|на отдельной странице]].

----

{{ :about:forma_razm02.jpg|}}

===== 2. Информационное поле =====

При активировании строки //списка для размещения// происходит следующее: в информационном поле отображаются данные, связанные с размещением текущего участника: сводный список совместного размещения и комментарий размещения, который указан в бланке регистрации участника.

То же самое происходит при активировании строки участника //в дереве размещения//.

При перетаскивании участника из списка в дерево размещения система предложит разместить в выбранной комнате вместе текущим участником тех участников, которые перечислены в сводном списке совместного размещения.

----

===== 3. Дерево размещения =====

Дерево размещения состоит из следующих колонок:

  * **Размещение**: объекты, этажи и комнаты; значок напротив участника в этой колонке означает, что участник является координатором комнаты;
  * **Участник**: в этой колонке указываются размещённые участники, а также категории комнат: //Братья//, //Сёстры// и //Без категории//; 
  * **П.**: флажок в этой колонке указывает на то, что участник прибыл, т.е. прошёл фактическую регистрацию;
  * **В.**: возраст участника, а также количество мест в комнате;
  * **Населённый пункт**: населённый пункт участника и количество свободных мест в комнате;
  * **Комментарий**: комментарий размещения, который был указан в бланке регистрации; это поле доступно для редактирования.

{{ :about:forma_razm03.jpg |}}

^{{:about:attention.png |}}При активировании строки участника в __информационном окне__ отображается сводная информация по совместному размещению текущего участника.^

Основные действия с деревом размещения осуществляются через //панель инструментов// (над деревом) и через //контекстное меню// (которое появляется при нажатии правой кнопки мыши).
==== Панель инструментов дерева размещения ====

Ниже приведено описание кнопок панели инструментов:

  * **Добавить**: используется, чтобы добавить объект размещения,((Объект будет автоматически добавлен в карточку мероприятия.)) комнату или ещё одно место в комнате;
  * **Удалить**: удаляет текущую строку дерева - объект, комнату или место в комнате;((Если на удаляемом месте размещён участник, то данные о его размещении после предупреждении будут очищены.))
  * **Найти**: открывается стандартное окно поиска; если участник найден в дереве размещения, строка участника становится текущей;
  * **Переместить**: позволяет переместить одного или нескольких участников из одной комнаты в другую;((Открывается список комнат со свободными местами.)) возможно перемещение нескольких участников, выделенных мышью при нажатой кнопке Ctrl;
  * **Свободные места**: выводит список комнат со свободными местами;
  * **Открыть**: подменю, с помощью которого можно открыть карточку участника, бланк регистрации или учёт питания текущего участника.

==== Контекстное меню дерева размещения ====

Контекстное меню появляется при нажатии правой кнопки мыши на строке дерева размещения.

{{ :about:forma_razm04.jpg |}}

Описание пунктов меню:

  * **Удалить**: удаляет текущую строку дерева - объект, комнату или место в комнате;((Если на удаляемом месте размещён участник, то данные о его размещении после предупреждении будут очищены)) действует аналогично кнопке "Удалить" в панели инструментов дерева размещения;
  * **Назначить координатором**: отмечает участника в качестве координатора; на скриншоте видно, что координатор обозначен специальным значком слева от фамилии участника;
  * **Переместить**: позволяет переместить участника из одной комнаты в другую;((Открывается список комнат со свободными местами))
  * **Первый ярус** и **Второй ярус**: используется для указания яруса размещения участника; слева от участника, которому указан второй ярус, появляется цифра "2"; для участников, размещаемых на первом ярусе цифра не выводится.

Следующие пункты контекстного меню аналогичны подменю **Открыть** в //панели инструментов//. 

==== Выбор категории комнаты ====

Для выбора категории комнаты необходимо дважды кликнуть мышью в колонке "Участник" строки комнаты. Появится окно с тремя вариантами выбора: "Для братьев", "Для сестёр" и "Без категории".

{{ :about:forma_razm05.jpg |}}

Можно изменить категорию всех комнат этажа. Для этого нужно дважды кликнуть мышью в колонке "Участник" строки этажа.

Система не позволит разместить участника в комнате с несоответствующей категорией. Например, технически невозможно разместить брата в комнате, категория которой "Для сестёр", и наоборот.